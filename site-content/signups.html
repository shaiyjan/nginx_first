<!DOCTYPE html>
<html>

<!--# include virtual="template/header.html" -->
<!--# include virtual="template/nav.html" -->

<script>
    const pathParts= window.location.pathname.split('/')
    window.tourID = pathParts[2]
</script>

<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>



<article id="mainwindow">
    <h3 id=tourName>Failed to Fetch</h3>
    <table id="part_info">
        <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Club</th>
        </tr>
    </table>
</article>

<script>
    async function tournament_name(url){
        const response = await fetch(url);
        if (!response.ok) {
            console.log("failed to fetch participant data")
        }
        const data = await response.json();
        const header = document.getElementById("tourName");
        header.textContent = data[window.tourID];
    }
    tournament_name("http://localhost:80/tournaments");

</script>


<script>
    async function participants(url) {
        const response = await fetch(url);
        if (!response.ok) {
            console.log("failed to fetch participant data")
        }
        const data = await response.json();
        const table = document.getElementById("part_info");
        for (const [key,value] of Object.entries(data)) {
            console.log(value);
            const tr = document.createElement("tr");
            const tsf =document.createElement("td"); 
            const tsl =document.createElement("td");
            const tsc =document.createElement("td");
            tsf.textContent = value[0];
            tsl.textContent = value[1];
            tsc.textContent = value[2];
            tr.appendChild(tsf)
            tr.appendChild(tsl)
            tr.appendChild(tsc)
            table.appendChild(tr)
        }
    }
    participants("http://localhost:80/signuplist/" + window.tourID)
</script>

<!--# include virtual="template/footer.html" -->
</html>